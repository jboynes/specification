{
  "type": "object",
  "$schema": "http://json-schema.org/draft-03/schema",
  "id": "https://signalk.github.io/specification/schemas/groups/environmental.json#",
  "description": "Schema describing the environmental child-object of a Vessel.",
  "title": "environment",
  "properties": {
    "airPressureChangeRateAlarm": {
      "description": "Change per hour which will cause an alarm",
      "$ref": "../definitions.json#/definitions/numberValue",
      "units": "pressure change.atmosphere"
    },

    "airPressure": {
      "description": "Current air pressure",
      "$ref": "../definitions.json#/definitions/numberValue",
      "units": "pressure.atmosphere"
    },
    
    "airTemp": {
      "description": "Current air temperature",
      "$ref": "../definitions.json#/definitions/numberValue",
      "units": "temperature.atmosphere"
    },
    
    "depth": {
      "title": "depth",
      "type": "object",
      "description": "Depth related data",
      "properties": {
        "belowKeel": {
          "description": "Depth below keel",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "length.depth"
        },

        "belowTransducer": {
          "description": "Depth below Transducer",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "length.depth"
        },
        
        "belowSurface": {
          "description": "Depth from surface",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "length.depth"
        },
        
        "transducerToKeel": {
          "description": "Depth from the transducer to the bottom of the keel",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "length.depth"
        },
        
        "surfaceToTransducer": {
          "description": "Depth transducer is below the water",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "length.depth"
        }
      }
    },

    "humidity": {
      "description": "Current relative humidity",
      "$ref": "../definitions.json#/definitions/numberValue",
      "units": "ratio"
    },
    
    "salinity": {
      "description": "Water salinity",
      "$ref": "../definitions.json#/definitions/numberValue",
      "units": "ratio"
    },
    
    "current": {
      "type": "object",
      "title": "current",
      "description": "Direction and strength of current affecting the vessel",
      "properties": {
        "timestamp": {
          "$ref": "../definitions.json#/definitions/timestamp"
        },
        
        "source": {
          "$ref": "../definitions.json#/definitions/source"
        },
        
        "drift": {
          "type": "number",
          "description": "The speed component of the water current vector",
          "example": 3.12,
          "units": "speed.current"
        },

        "setTrue": {
          "type": "number",
          "description": "The direction component of the water current vector referenced to true (geographic) north",
          "example": 123.45,
          "units": "plane angle.bearing"
        },

        "setMagnetic": {
          "type": "number",
          "description": "The direction component of the water current vector referenced to magnetic north",
          "example": 131.22,
          "units": "plane angle.bearing"
        }
      }
    },

    "tide": {
      "type": "object",
      "title": "tide",
      "description": "Tide data",
      "properties": {
        "heightHigh": {
          "description": "Next high tide",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "length.depth"
        },

        "heightNow": {
          "description": "The current tide height",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "length.depth"
        },
        
        "heightLow": {
          "description": "The next low tide height",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "length.depth"
        },
        
        "timeLow": {
          "description": "Time of the next low tide in UTC",
          "$ref": "../definitions.json#/definitions/timestamp"
        },
        
        "timeHigh": {
          "description": "Time of next high tide in UTC",
          "$ref": "../definitions.json#/definitions/timestamp"
        }
      }
    },

    "waterTemp": {
      "description": "Current water temperature",
      "$ref": "../definitions.json#/definitions/numberValue",
      "units": "temperature.water"
    },
   
    "heave": {
      "description": "Vertical movement of the vessel due to waves",
      "$ref": "../definitions.json#/definitions/numberValue",
      "units": "length"
    },
    
    "wind": {
      "type": "object",
      "title": "wind",
      "description": "Wind data.",
      "properties": {
        "angleApparent": {
          "description": "Apparent wind angle, negative to port",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "plane angle.relative.centreline"
        },

        "angleTrueGround": {
          "description": "True wind angle based on speed over ground, negative to port",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "plane angle.relative.centreline"
        },
        
        "angleTrueWater": {
          "description": "True wind angle based on speed through water, negative to port",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "plane angle.relative.centreline"
        },
        
        "directionChangeAlarm": {
          "description": "The angle the wind needs to shift to raise an alarm",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "plane angle"
        },
        
        "directionTrue": {
          "description": "The wind direction relative to true north",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "plane angle.bearing"
        },
        
        "directionMagnetic": {
          "description": "The wind direction relative to magnetic north",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "plane angle.bearing"
        },
        
        "speedAlarm": {
          "description": "The speed above which a wind alarm will be raised",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "speed.wind"
        },
        
        "speedTrue": {
          "description": "Wind speed over water (as calculated from speedApparent and vessel's speed through water)",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "speed.wind"
        },
        
        "speedOverGround": {
          "description": "Wind speed over ground (as calculated from speedApparent and vessel's speed over ground)",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "speed.wind"
        },
        
        "speedApparent": {
          "description": "Apparent wind speed",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "speed.wind"
        }
      }
    }
  }
}
